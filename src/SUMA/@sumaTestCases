#!/bin/tcsh

# [PDL: April 23, 2024] Demo for Alpha transparency
#
# Runs from ~/abin
#
# Usage: @sumaTestCases <Path to executable>
#
# Example: ./@sumaTestCases "~/afniDev/afni/build/src/SUMA"
#
# If the path to the executable is not specified, the suma, in the default
# search path, is used.

@global_parse `basename $0` "$*" ; if ($status) exit 0

#Example commands for running @DriveSuma
# No output


if ($#argv > 0) then
        set path = ($1 $path)
endif


set HelpOpt = ''
echo "$1" | \grep -w -E  \
      '\-h_txt|\-h_spx|\-h_aspx|\-h_raw|\-help|\-h' >& /dev/null
if ($status == 0) then
   set HelpOpt = "$1"
   goto HELP
endif

        set l = `prompt_user -pause \
'@DriveSuma \n\
#Make sure no current SUMA is running, then press OK'`
        if ( $l == '0') goto STEND

        # Opaque/transparent planes
        set l = `prompt_user -pause \
                '@DriveSuma \n\
                Press OK for Opaque/transparent planes'`

        # set SUMA_DIR = $1
	cd $HOME/AFNI_data6/roi_demo
        set NEW_PORT = `afni -available_npb_quiet`
        echo  $NEW_PORT
	suma -vol anat+orig &

        set l = `prompt_user -pause \
                '@DriveSuma \n\
                Press OK for next demo'`
	echo "++++++++++++++++++++++++  Next demo"
        DriveSuma -com kill_suma

	# Variable transparency
        set l = `prompt_user -pause \
                '@DriveSuma \n\
                Press OK for Variable transparency'`

	cd $HOME/AFNI_data6/FT_analysis/FT.surf.results
	suma -spec /home/peterlauren/AFNI_data6/FT_analysis/FT/SUMA/std.60.FT_lh.spec \
		-sv FT.surf_SurfVol_Alnd_Exp+orig &

        DriveSuma -com  viewer_cont -key '.'
        DriveSuma -com  viewer_cont -key '.'
        DriveSuma -com  viewer_cont -key '.'
        DriveSuma -com  viewer_cont -key 'ctrl+s'
        DriveSuma -com surf_cont -view_surf_cont y
	DriveSuma -echo_edu   \
                 -com surf_cont -load_dset stats.FT.surf.lh.niml.dset


        set l = `prompt_user -pause \
                '@DriveSuma \n\
                Press OK to set Threshold'`

       set THR = 15
       DriveSuma -com  surf_cont -T_val $THR

        set l = `prompt_user -pause \
                '@DriveSuma \n\
                Press OK to see Alpha'`
       DriveSuma -com surf_cont -SET_FUNC_ALPHA yes

        set l = `prompt_user -pause \
                '@DriveSuma \n\
                Press OK to turn Alpha off'`
       DriveSuma -com surf_cont -SET_FUNC_ALPHA no

        set l = `prompt_user -pause \
                '@DriveSuma \n\
                Press OK to change colormap'`
       DriveSuma -com surf_cont -switch_cmap ygbrp128

        set l = `prompt_user -pause \
                '@DriveSuma \n\
                Press OK to see Alpha'`
       DriveSuma -com surf_cont -SET_FUNC_ALPHA yes

       set l = `prompt_user -pause \
                '@DriveSuma \n\
                Press OK to turn Alpha off'`
       DriveSuma -com surf_cont -SET_FUNC_ALPHA no

       set l = `prompt_user -pause \
                '@DriveSuma \n\
                Press OK to change I range'`
       DriveSuma -com surf_cont -I_range -5 15

       set l = `prompt_user -pause \
                '@DriveSuma \n\
                Press OK to see Alpha'`
       DriveSuma -com surf_cont -SET_FUNC_ALPHA yes

       set l = `prompt_user -pause \
                '@DriveSuma \n\
                Press OK to switch I(ntensity) to 1'`
       DriveSuma -com surf_cont -I_sb 1

       set l = `prompt_user -pause \
                '@DriveSuma \n\
                Press OK to turn Alpha off'`
       DriveSuma -com surf_cont -SET_FUNC_ALPHA no

       set l = `prompt_user -pause \
                '@DriveSuma \n\
                Press OK to set Threshold to 6'`

       set THR = 6
       DriveSuma -com  surf_cont -T_val $THR


        set l = `prompt_user -pause \
                '@DriveSuma \n\
                Press OK to change colormap to Spectrum:red_to_blue'`
       DriveSuma -com surf_cont -switch_cmap Spectrum:red_to_blue

        set l = `prompt_user -pause \
                '@DriveSuma \n\
                Press OK to see Alpha'`
       DriveSuma -com surf_cont -SET_FUNC_ALPHA yes





